<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/svg+xml" sizes="any" href="_static/logo-symbol-only.svg">
    <link rel="icon" type="image/svg+xml" sizes="16x16 24x24 32x32 48x48" href="_static/favicon.svg"><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Package Discovery and Resource Access using pkg_resources" href="pkg_resources.html" /><link rel="prev" title="Configuring setuptools using pyproject.toml files" href="userguide/pyproject_config.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2023.08.19 -->
        <title>Build System Support - setuptools 68.1.2.post20230823 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="_static/css/tooltipster.custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/tooltipster.bundle.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-shadow.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-punk.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-noir.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-light.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-borderless.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/micromodal.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />




<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #336790;
  --color-brand-content: #336790;

  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #E5B62F;
  --color-brand-content: #E5B62F;

    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #E5B62F;
  --color-brand-content: #E5B62F;

      }
    }
  }
</style></head>
  <body>

    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">setuptools 68.1.2.post20230823 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">

      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">

  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/logo.svg" alt="Logo"/>
  </div>


</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/pypa/setuptools">Home</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pypi.org/project/setuptools">PyPI</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="userguide/index.html">User guide</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of User guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="userguide/quickstart.html">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="userguide/package_discovery.html">Package Discovery and Namespace Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="userguide/dependency_management.html">Dependencies Management in Setuptools</a></li>
<li class="toctree-l2"><a class="reference internal" href="userguide/development_mode.html">Development Mode (a.k.a. “Editable Installs”)</a></li>
<li class="toctree-l2"><a class="reference internal" href="userguide/entry_point.html">Entry Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="userguide/datafiles.html">Data Files Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="userguide/ext_modules.html">Building Extension Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="userguide/distribution.html">Specifying Your Project’s Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="userguide/miscellaneous.html">Controlling files in the distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="userguide/extension.html">Extending or Customizing Setuptools</a></li>
<li class="toctree-l2"><a class="reference internal" href="userguide/declarative_config.html">Configuring setuptools using <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> files</a></li>
<li class="toctree-l2"><a class="reference internal" href="userguide/pyproject_config.html">Configuring setuptools using <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> files</a></li>
</ul>
</li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Build System Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="pkg_resources.html">Package Discovery and Resource Access using <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="references/keywords.html">Keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="setuptools.html">Building and Distributing Packages with Setuptools</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="development/index.html">Development guide</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Development guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="development/developer-guide.html">Developer’s Guide for Setuptools</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/releases.html">Release Process</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="deprecated/index.html">Backward compatibility &amp; deprecated practice</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Backward compatibility &amp; deprecated practice</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="deprecated/changed_keywords.html">New and Changed <code class="docutils literal notranslate"><span class="pre">setup()</span></code> Keywords</a></li>
<li class="toctree-l2"><a class="reference internal" href="deprecated/dependency_links.html">Specifying dependencies that aren’t in PyPI via <code class="docutils literal notranslate"><span class="pre">dependency_links</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="deprecated/python_eggs.html">The Internal Structure of Python Eggs</a></li>
<li class="toctree-l2"><a class="reference internal" href="deprecated/easy_install.html">Easy Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="deprecated/zip_safe.html">Understanding the <code class="docutils literal notranslate"><span class="pre">zip_safe</span></code> flag</a></li>
<li class="toctree-l2"><a class="reference internal" href="deprecated/resource_extraction.html">Automatic Resource Extraction</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="deprecated/distutils/index.html">Distributing Python Modules (Legacy version)</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Distributing Python Modules (Legacy version)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="deprecated/distutils/introduction.html">1. An Introduction to Distutils</a></li>
<li class="toctree-l3"><a class="reference internal" href="deprecated/distutils/setupscript.html">2. Writing the Setup Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="deprecated/distutils/configfile.html">3. Writing the Setup Configuration File</a></li>
<li class="toctree-l3"><a class="reference internal" href="deprecated/distutils/sourcedist.html">4. Creating a Source Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="deprecated/distutils/builtdist.html">5. Creating Built Distributions</a></li>
<li class="toctree-l3"><a class="reference internal" href="deprecated/distutils/examples.html">6. Distutils Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="deprecated/distutils/extending.html">7. Extending Distutils</a></li>
<li class="toctree-l3"><a class="reference internal" href="deprecated/distutils/commandref.html">8. Command Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="deprecated/distutils/apiref.html">9. API Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deprecated/distutils-legacy.html">Porting from Distutils</a></li>
<li class="toctree-l2"><a class="reference internal" href="deprecated/functionalities.html">“Eggsecutable” Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="deprecated/commands.html">Running <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html#credits">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="artwork.html">Artwork</a></li>
</ul>

</div>
</div>

      </div>

    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="build-system-support">
<h1>Build System Support<a class="headerlink" href="#build-system-support" title="Permalink to this heading">#</a></h1>
<section id="what-is-it">
<h2>What is it?<a class="headerlink" href="#what-is-it" title="Permalink to this heading">#</a></h2>
<p>Python packaging has come <a class="reference external" href="https://bernat.tech/posts/pep-517-518/">a long way</a>.</p>
<p>The traditional <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> way of packaging Python modules
uses a <code class="docutils literal notranslate"><span class="pre">setup()</span></code> function within the <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> script. Commands such as
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">bdist</span></code> or <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">bdist_wheel</span></code> generate a
distribution bundle and <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code> installs the distribution.
This interface makes it difficult to choose other packaging tools without an
overhaul. Because <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> scripts allow for arbitrary execution, it
is difficult to provide a reliable user experience across environments
and history.</p>
<p><span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0517/"><strong>PEP 517</strong></a> came to
the rescue and specified a new standard for packaging and distributing Python
modules. Under PEP 517:</p>
<blockquote>
<div><p>A <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file is used to specify which program to use
to generate the distribution.</p>
<p>Two functions provided by the program, <code class="docutils literal notranslate"><span class="pre">build_wheel(directory:</span> <span class="pre">str)</span></code>
and <code class="docutils literal notranslate"><span class="pre">build_sdist(directory:</span> <span class="pre">str)</span></code>, create the distribution bundle in the
specified <code class="docutils literal notranslate"><span class="pre">directory</span></code>.</p>
<p>The program may use its own configuration file or extend the <code class="docutils literal notranslate"><span class="pre">.toml</span></code> file.</p>
<p>The actual installation is done with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">*.whl</span></code> or
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">*.tar.gz</span></code>. If <code class="docutils literal notranslate"><span class="pre">*.whl</span></code> is available, <code class="docutils literal notranslate"><span class="pre">pip</span></code> will go ahead and copy
its files into the <code class="docutils literal notranslate"><span class="pre">site-packages</span></code> directory. If not, <code class="docutils literal notranslate"><span class="pre">pip</span></code> will look at
<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> and decide which program to use to ‘build from source’.
(Note that if there is no <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file or the <code class="docutils literal notranslate"><span class="pre">build-backend</span></code>
parameter is not defined, then the fall-back behaviour is to use <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>.)</p>
</div></blockquote>
<p>With this standard, switching between packaging tools is a lot easier.</p>
</section>
<section id="how-to-use-it">
<h2>How to use it?<a class="headerlink" href="#how-to-use-it" title="Permalink to this heading">#</a></h2>
<p>Start with a package that you want to distribute. You will need your source
files, a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file and a <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">~/</span><span class="n">meowpkg</span><span class="o">/</span>
    <span class="n">pyproject</span><span class="o">.</span><span class="n">toml</span>
    <span class="n">setup</span><span class="o">.</span><span class="n">cfg</span>
    <span class="n">meowpkg</span><span class="o">/</span>
        <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
        <span class="n">module</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file specifies the build system (i.e. what is
being used to package your scripts and install from source). To use it with
<code class="docutils literal notranslate"><span class="pre">setuptools</span></code> the content would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">system</span><span class="p">]</span>
<span class="n">requires</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;setuptools&quot;</span><span class="p">]</span>
<span class="n">build</span><span class="o">-</span><span class="n">backend</span> <span class="o">=</span> <span class="s2">&quot;setuptools.build_meta&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">build_meta</span></code> implements <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>’ build system support.
The <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> package implements the <code class="docutils literal notranslate"><span class="pre">build_sdist</span></code>
command and the <code class="docutils literal notranslate"><span class="pre">wheel</span></code> package implements the <code class="docutils literal notranslate"><span class="pre">build_wheel</span></code>
command; the latter is a dependency of the former
exposed via <span class="target" id="index-1"></span><a class="pep reference external" href="https://peps.python.org/pep-0517/"><strong>PEP 517</strong></a> hooks.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>’ <a class="hxr-hoverxref hxr-tooltip reference internal" href="userguide/declarative_config.html#declarative-config"><span class="std std-ref">declarative config</span></a> to
specify the package information in <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">metadata</span><span class="p">]</span>
<span class="n">name</span> <span class="o">=</span> <span class="n">meowpkg</span>
<span class="n">version</span> <span class="o">=</span> <span class="mf">0.0.1</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">a</span> <span class="n">package</span> <span class="n">that</span> <span class="n">meows</span>

<span class="p">[</span><span class="n">options</span><span class="p">]</span>
<span class="n">packages</span> <span class="o">=</span> <span class="n">find</span><span class="p">:</span>
</pre></div>
</div>
<p id="building">Now generate the distribution. To build the package, use
<a class="reference external" href="https://pypa-build.readthedocs.io/en/latest/">PyPA build</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install -q build
$ python -m build
</pre></div>
</div>
<p>And now it’s done! The <code class="docutils literal notranslate"><span class="pre">.whl</span></code> file  and <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code> can then be distributed
and installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>dist/
    meowpkg-0.0.1.whl
    meowpkg-0.0.1.tar.gz

$ pip install dist/meowpkg-0.0.1.whl
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install dist/meowpkg-0.0.1.tar.gz
</pre></div>
</div>
</section>
<section id="dynamic-build-dependencies-and-other-build-meta-tweaks">
<span id="backend-wrapper"></span><h2>Dynamic build dependencies and other <code class="docutils literal notranslate"><span class="pre">build_meta</span></code> tweaks<a class="headerlink" href="#dynamic-build-dependencies-and-other-build-meta-tweaks" title="Permalink to this heading">#</a></h2>
<p>With the changes introduced by <span class="target" id="index-2"></span><a class="pep reference external" href="https://peps.python.org/pep-0517/"><strong>PEP 517</strong></a> and <span class="target" id="index-3"></span><a class="pep reference external" href="https://peps.python.org/pep-0518/"><strong>PEP 518</strong></a>, the
<code class="docutils literal notranslate"><span class="pre">setup_requires</span></code> configuration field was deprecated in <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> and
<code class="docutils literal notranslate"><span class="pre">setup.py</span></code>, in favour of directly listing build dependencies in the
<code class="docutils literal notranslate"><span class="pre">requires</span></code> field of the <code class="docutils literal notranslate"><span class="pre">build-system</span></code> table of <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>.
This approach has a series of advantages and gives package managers and
installers the ability to inspect the build requirements in advance and
perform a series of optimisations.</p>
<p>However, some package authors might still need to dynamically inspect the final
user’s machine before deciding these requirements. One way of doing that, as
specified by <span class="target" id="index-4"></span><a class="pep reference external" href="https://peps.python.org/pep-0517/"><strong>PEP 517</strong></a>, is to “tweak” <code class="docutils literal notranslate"><span class="pre">setuptools.build_meta</span></code> by using an
<span class="target" id="index-5"></span><a class="pep reference external" href="https://peps.python.org/pep-0517/#in-tree-build-backends"><strong>in-tree backend</strong></a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Before implementing an <em>in-tree</em> backend, have a look at
<span class="target" id="index-6"></span><a class="pep reference external" href="https://peps.python.org/pep-0508/#environment-markers"><strong>PEP 508</strong></a>. Most of the time, dependencies
with <strong>environment markers</strong> are enough to differentiate operating systems
and platforms.</p>
</div>
<p>If you put the following configuration in your <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[build-system]</span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;setuptools&quot;</span><span class="p">]</span>
<span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;backend&quot;</span>
<span class="n">backend-path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;_custom_build&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>then you can implement a thin wrapper around <code class="docutils literal notranslate"><span class="pre">build_meta</span></code> in
the <code class="docutils literal notranslate"><span class="pre">_custom_build/backend.py</span></code> file, as shown in the following example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">build_meta</span> <span class="k">as</span> <span class="n">_orig</span>
<span class="kn">from</span> <span class="nn">setuptools.build_meta</span> <span class="kn">import</span> <span class="o">*</span>


<span class="k">def</span> <span class="nf">get_requires_for_build_wheel</span><span class="p">(</span><span class="n">config_settings</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_orig</span><span class="o">.</span><span class="n">get_requires_for_build_wheel</span><span class="p">(</span><span class="n">config_settings</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">get_requires_for_build_sdist</span><span class="p">(</span><span class="n">config_settings</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_orig</span><span class="o">.</span><span class="n">get_requires_for_build_sdist</span><span class="p">(</span><span class="n">config_settings</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can override any of the functions specified in <span class="target" id="index-7"></span><a class="pep reference external" href="https://peps.python.org/pep-0517/#build-backend-interface"><strong>PEP 517</strong></a>, not only the ones responsible for gathering
requirements. It is important to <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">*</span></code> so that the hooks that you
choose not to reimplement would be inherited from the setuptools’ backend
automatically. This will also cover hooks that might be added in the future
like the ones that <span class="target" id="index-8"></span><a class="pep reference external" href="https://peps.python.org/pep-0660/"><strong>PEP 660</strong></a> declares.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Make sure your backend script is included in the <a class="reference internal" href="userguide/distribution.html"><span class="doc">source
distribution</span></a>, otherwise the build will fail.
This can be done by using a <a class="reference external" href="https://en.wikipedia.org/wiki/Software_configuration_management">SCM</a>/<a class="reference external" href="https://en.wikipedia.org/wiki/Version_control">VCS</a> plugin (like <a class="reference external" href="https://pypi.org/project/setuptools-scm">setuptools-scm</a>
and <a class="reference external" href="https://pypi.org/project/setuptools-svn">setuptools-svn</a>), or by correctly setting up <a class="hxr-hoverxref hxr-tooltip reference internal" href="deprecated/distutils/sourcedist.html#manifest"><span class="std std-ref">MANIFEST.in</span></a>.</p>
<p>The generated <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code> and <code class="docutils literal notranslate"><span class="pre">.whl</span></code> files are compressed archives that
can be inspected as follows:
On POSIX systems, this can be done with <code class="docutils literal notranslate"><span class="pre">tar</span> <span class="pre">-tf</span> <span class="pre">dist/*.tar.gz</span></code>
and <code class="docutils literal notranslate"><span class="pre">unzip</span> <span class="pre">-l</span> <span class="pre">dist/*.whl</span></code>.
On Windows systems, you can rename the <code class="docutils literal notranslate"><span class="pre">.whl</span></code> to <code class="docutils literal notranslate"><span class="pre">.zip</span></code> to be able to
inspect it from File Explorer. You can also use the above <code class="docutils literal notranslate"><span class="pre">tar</span></code> command in a
command prompt to inspect the <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code> file. Alternatively, there are GUI programs
like <a class="reference external" href="https://www.7-zip.org">7-zip</a> that handle <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code> and <code class="docutils literal notranslate"><span class="pre">.whl</span></code> files.</p>
<p>In general, the backend script should be present in the <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code> (so the
project can be built from the source) but not in the <code class="docutils literal notranslate"><span class="pre">.whl</span></code> (otherwise the
backend script would end up being distributed alongside your package).
See “<a class="reference internal" href="userguide/package_discovery.html"><span class="doc">Package Discovery and Namespace Packages</span></a>” for more details about package
files.</p>
</div>
</section>
</section>

        </article>
      </div>
      <footer>

        <div class="related-pages">
          <a class="next-page" href="pkg_resources.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Package Discovery and Resource Access using <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code></div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="userguide/pyproject_config.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>

                <div class="title">Configuring setuptools using <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> files</div>

              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; Python Packaging Authority
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s

            <a href="https://github.com/pradyunsg/furo">Furo</a>

          </div>
          <div class="right-details">

          </div>
        </div>

      </footer>
    </div>
    <aside class="toc-drawer">


      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Build System Support</a><ul>
<li><a class="reference internal" href="#what-is-it">What is it?</a></li>
<li><a class="reference internal" href="#how-to-use-it">How to use it?</a></li>
<li><a class="reference internal" href="#dynamic-build-dependencies-and-other-build-meta-tweaks">Dynamic build dependencies and other <code class="docutils literal notranslate"><span class="pre">build_meta</span></code> tweaks</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>


    </aside>
  </div>
</div><script src="_static/jquery.js?v=5d32c60e"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=704ab38f"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="_static/js/hoverxref.js"></script>
    <script src="_static/js/tooltipster.bundle.min.js"></script>
    <script src="_static/js/micromodal.min.js"></script>
    <script src="_static/tabs.js?v=3ee01567"></script>
    <script id="MathJax-script" async="async" src="_static/js/mathjax/tex-chtml.js"></script>
    </body>
</html>